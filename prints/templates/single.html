{% extends "base.html" %}{% load static %}

{% block title %}{{ print.title }}{% endblock %}

{% block content %}
<div class="row">
    <h3 class="brown-text print-title margin-b-20">{{ print.title }}</h3>
    <div class="col-xs-12 col-sm-5 col-md-5 col-lg-6 col-xl-6">
        <div class="row margin-b-30 text-center">
            {% if print.title_page %}
            <img src="{% static print.title_page.static %}" alt="Strona tytułowa" class="title-img">
            {% else %}
            <span onclick="$('#drop-title-page').show()" class="default-title-page" style="background-image: url({% static "img/add.png" %})">
                <img src="{% static default_title_page %}" alt="(Brak strony tytułowej)" class="title-img" />
            </span>
            {% endif %}
        </div>
        <hr />
        <div class="row">
            <p class="title-page">{% if print.title_page_content %}{{ print.title_page_content }}{% else %}<i>(brak)</i>{% endif %}</p>
        </div>
    </div>
    <div class="col-xs-12 col-sm-7 col-md-7 col-lg-6 col-xl-6 padding-r-30">
        <div class="row">
            <ul class="keywords">
                {% for keyword in print.key_words %}
                    <li class="keyword">
                        <a href="{% url "prints:collection" %}?keywords__contains={{ keyword }}" class="keyword">{{ keyword }}</a>
                    </li>
                {% endfor %}
            </ul>

            <ul class="print-info">
                <li class="info-item">
                    <div class="info-label">Tytuł:</div>
                    <div class="info-data">{{ print.title }}</div>
                </li>
                <li class="info-item">
                    <div class="info-label">Autor:</div>
                    <div class="info-data">{{ print.author }}</div>
                </li>
                <li class="info-item">
                    <div class="info-label">Data wydania:</div>
                    <div class="info-data">{{ print.date }}</div>
                </li>
                <li class="info-item">
                    <div class="info-label">Miejsce wydania:</div>
                    <div class="info-data">{{ print.place }}</div>
                </li>
                <li class="info-item">
                    <div class="info-label">Wydawca:</div><div class="info-data">{{ print.publisher }}</div>
                </li>
                <li class="info-item">
                    <div class="info-label">Sygnatura:</div>
                    <div class="info-data">{{ print.signature }}</div>
                </li>
            </ul>
            <div class="button-box">
                <a href="{% url "prints:view" print.id %}" class="brown-btn">Zobacz całość</a>
                {% if user.is_authenticated %}
                <a href="{% url "management:edit" print.id %}" class="brown-btn margin-l-15">Edytuj informacje</a>
                {% endif %}
            </div>
        </div>

        <div class="row">
            <ul class="share">
                <li class="share">
                    <a href="http://www.facebook.com/share.php?u={{ request.build_absolute_uri }}" class="fa fa-facebook share"></a>
                </li>
                <li class="share">
                    <a href="https://twitter.com/intent/tweet?button_hashtag=TwitterStories" class="fa fa-twitter share"></a>
                </li>
                <!--<li class="share">-->
                    <!--<a href="" class="fa fa-google-plus share"></a>-->
                <!--</li>-->
                <li class="share">
                    <a href="mailto:?body={{ request.build_absolute_uri }}" class="fa fa-envelope share"></a>
                </li>
            </ul>
        </div>
    </div>
</div>

<div class="overlay-page" id="drop-title-page">
    <form action="{% url "management:upload_title_page" print.id %}" class="dropzone" id="title-page-dropzone"></form>
</div>
{% endblock %}
{% block extra_script %}
<script src="{% static "js/dropzone.js" %}"></script>
<script>
$('#drop-title-page').click(function(e){
    $('#drop-title-page').hide();
}).children().click(function(e) {return false;});

Dropzone.options.titlePageDropzone = {
  maxFilesize: 100, // MB
  maxFiles: 1,

  success: function(e, response){
    $('#drop-title-page').hide();
  },
  headers: {
    'X-CSRFToken': '{{ csrf_token }}'
  }
};

</script>
{% endblock %}
